<!doctype html>
<html lang="en">
<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="css/bootstrap.min.css">

<!-- Loding font -->
<link href="css/fonts.css" rel="stylesheet">

<!-- Custom Styles -->
<link rel="stylesheet" type="text/css" href="css/register.css">

<title>注册 - FuCubeCloud</title>

<!-- 引入jQuery -->
<script src="js/jquery-3.6.0.min.js"></script>
</head>
<body>

<!-- Backgrounds -->

<div id="login-bg" class="container-fluid">

  <div class="bg-img"></div>
  <!-- <div class="bg-color"></div> -->
</div>

<!-- End Backgrounds -->

<div class="container" id="login">
	<div class="row justify-content-center">
	<div class="col-lg-8">
	  <div class="login">

		<h2>注册</h2>
		
		<!-- Registration form -->
		<form id="registration-form">
			<div class="form-group">
				<input type="text" class="form-control" id="username" placeholder="用户名">
			</div>
			<div class="form-group">
				<input type="email" class="form-control" id="email" placeholder="电子邮箱">
			</div>
			<div class="form-group">
				<input type="password" class="form-control" id="password" placeholder="密码">
			</div>
			<div class="form-group">
				<input type="password" class="form-control" id="confirm-password" placeholder="确认密码">
			</div>
			
			<!-- 添加验证码输入框 -->
			<div class="form-group">
				<input type="text" class="form-control" id="verification-code" placeholder="验证码">
			</div>
			
			<!-- 添加获取验证码按钮 -->
			<button type="button" class="btn btn-secondary btn-block" id="get-verification-code">获取验证码</button>
			
			<div class="form-check">
				<label class="already-have-account"><a href="/login">已有账号? 登录</a></label>
			</div>
			
			<br>
			<button type="submit" class="btn btn-lg btn-block btn-success" id="submit-btn">注册</button>
		</form>
		<!-- End Registration form -->

	  </div>
	  <span style="color:white;">Copyright &copy; 2024 FuCubeCloud 芙方云 All rights reserved.</span> 
	</div>
	</div>
</div>

<!-- 添加脚本 -->
<script>
$(document).ready(function(){
    // 获取验证码按钮点击事件
    $('#get-verification-code').click(function(){
        var email = $('#email').val();
        if(email){
            // 发送AJAX请求获取验证码
            $.ajax({
                url: 'http://127.0.0.1:5000/api/send_verification_code', // 假设这是你的后端获取验证码的URL
                type: 'GET',
                data: {email: email},
                success: function(response){
                    alert('验证码已发送，请查收邮件。');
                    $('#submit-btn').prop('disabled', false);
                },
                error: function(error){
                    alert('获取验证码失败，请检查邮箱是否正确。');
                }
            });
        } else {
            alert('请输入邮箱地址。');
        }
    });

    // 表单提交事件
    $('#registration-form').submit(function(event){
        event.preventDefault();
        
        var username = $('#username').val();
        var email = $('#email').val();
        var password = $('#password').val();
        var confirmPassword = $('#confirm-password').val();
        var verificationCode = $('#verification-code').val();

        // 发送AJAX请求到后端进行注册
        $.ajax({
            url: 'http://127.0.0.1:5000/api/register', // 假设这是你的后端注册URL
            type: 'POST',
            data: {
                'username': username,
                'email': email,
                'password': password,
                'confirmPassword': confirmPassword,
                'verificationCode': verificationCode
            },
            success: function(response){
                alert('注册成功！');
                // 可以在此处添加重定向到登录页的代码
            },
            error: function(error){
                alert('注册失败，请检查您的输入或验证码。');
            }
        });
    });
});
</script>

</body>
</html>